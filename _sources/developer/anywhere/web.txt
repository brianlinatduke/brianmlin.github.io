===================
Web Developer Guide
===================

.. raw:: latex

	\iffalse

.. .. note:: A PDF version of this guide is available for :download:`download </_build/latex/DeveloperAnywhere.pdf>`.

.. raw:: latex

	\fi

--------
Overview
--------
Live Expert Anywhere can be enabled through the use of our JavaScript application in the way that best suits your implementation. The most common installation uses the Live Expert Widget; you may also take advantage of the Direct Access API.

Live Expert Widget
==================
The Live Expert Widget is enabled and provided for your use by default. With the Widget, a Flash animation, image, or multi-button set is floated along the side of your website.

Direct Access API
=================
By requesting to disable the Widget and including an additional JavaScript file, you gain access to the platform’s application programming interface.

Customization
=============
Each implementation requires parameters to be defined, with additional options that provide flexibility for your use case. These are reviewed in detail in the sections “Configuration Parameters” and “Custom Session Fields”.

------------------
Live Expert Widget
------------------
The Live Expert Widget is enabled by default and may be disabled at your request in favor of the Direct Access API.

Sample Implementation
=====================

.. figure:: _static/sample_implementation.png

   A widget is fixed to the right-hand side of a website.

Installation
============
To use Live Expert Anywhere, include the following ``<script>`` element to the bottom of your HTML before the closing ``</body>`` tag.

::

  <!DOCTYPE html>
  <html>
    ...
    <body>
      ...
      <script src="//assets.liveexpert.net/widget/javascript/leaWidget.js"></script>
      <script>
        var config = {
          enterpriseURL: 'liveexpert.net',
          sourceHost: 'assets.liveexpert.net',
          assetLocation: 'company-alias',
          companyID: 123,
          categoryID: 456,
          language: 'EN'
        };
        liveexpert.LEAWidget.init(config);
      </script>
    </body>
  </html>

-----------------
Direct Access API
-----------------
A Live Expert Anywhere session can be started by including liveExpertAPI.js and calling liveexpert.startCall() using any HTML element on your webpage.

Sample Implementation
=====================

.. figure:: _static/direct_access_api.png

   A blue “Connect Now” button will request an agent when clicked.

Installation
============
The Direct Access API enables you to initiate a Live Expert request from any HTML element on your website by adding the highlighted code:

::

  <!DOCTYPE html>
  <html>
    ...
    <body>
      <img src="button.png" onClick="liveexpert.startCall()">
      ...
      <script src="//assets.liveexpert.net/widget/javascript/leaWidget.js"></script>
      <script src="//assets.liveexpert.net/anywhere/liveExpertAPI.js"></script>
      <script>
        var config = {
          enterpriseURL: 'liveexpert.net',
          sourceHost: 'assets.liveexpert.net',
          assetLocation: 'company-alias',
          companyID: 123,
          categoryID: 456,
          language: 'EN'
        };
        liveexpert.LEAWidget.init(config);
      </script>
    </body>
  </html>

------------------------
Configuration Parameters
------------------------
There are several JavaScript variables that need to be defined to properly configure Live Expert Anywhere. Other optional variables (listed on the following page) are optional and further customize the functionality you wish to provide.

.. csv-table:: Required Configuration
   :header: "Name", "Description", "Example"

   "enterpriseURL", "String. The hostname of the Live Expert Enterprise server.", "liveexpert.net"
   "sourceHost", "String. The hostname of the Live Expert Widget application.", "assets.liveexpert.net"
   "assetLocation", "String. The identifier for the set of assets to load.†", "company-alias"
   "companyID", "Integer. The Company identifier.†", "123"
   "categoryID", "Integer. The Expertise Category to which the request will be made.‡", "456"
   "language", "String. Abbreviation for the Language of the request being made.§", "EN"

.. csv-table:: Optional Configuration
   :header: "Name", "Description", "Example"

    "largeVideo","Integer. Enable starting a call in the large video state (default: 0).","1 (true) 0 (false)"
    "callTypeID","Integer. The type of request. Enables the camera and/or microphone.","1 (audio & video) 2 (audio only) 3 (video only) 4 (no devices)"
    "expertID","Integer. The identifier for an Expert to which the request will be made.","1001"
    "customSessionFields","JavaScript object. The set(s) of information with the request (see: Custom Session Fields).","{ 123: 'foo', 456: 'bar' }"
    "camEnabled","Boolean. Sets the camera state.**","true (enabled) false (disabled)"
    "micEnabled","Boolean. Sets the microphone state.**","true (enabled) false (disabled)"
    "enableWidget","Boolean. Displays the widget (default: true).","true (enabled) false (disabled)"
    "enableCobrowsing","Boolean. Sets the cobrowsability of a page.","true (enabled) false (disabled)"
    "enableTracking","Boolean. See: Customer Session Tracking.","true (enabled) false (disabled)"

---------------------
Custom Session Fields
---------------------
This feature allows you to specify information prior to a call beginning that provides additional context for the session. The information is then displayed to an agent using the Live Expert Studio both when receiving the initial call invitation and during the session.

.. tip:: Custom Session Fields may have many applications depending on your use case.

   - The username or account number of the customer currently on your website.
   - The area or department that a request originates from or intended for.
   - A description of the reason a customer wishes to speak with an agent.

Custom Session Fields are configured in the Live Expert Enterprise. Please refer to the “Enterprise Admin Guide” for instructions on defining your custom fields.

To use custom session fields add a “customSessionFields” attribute to the Live Expert Widget configuration object. The value associated with this will be a JavaScript object in which each key corresponds to a “Custom Session Field ID” value specified in the Live Expert Enterprise. The value for each entry in this object can be an arbitrary string of your choosing. A sample configuration is provided below:

::

  <body>
    ...
    <script src="//assets.liveexpert.net/widget/javascript/leaWidget.js"></script>
    <script>
      var config = {
          enterpriseURL: 'liveexpert.net',
          sourceHost: 'assets.liveexpert.net',
          assetLocation: 'company-alias',
          companyID: 123,
          categoryID: 456,
          language: ‘EN’,
          customSessionFields: {
            123: ‘variable1’,
            456: ‘variable2’,
            789: ‘variable3’
          }
      };
      liveexpert.LEAWidget.init(config);
    </script>
  </body>

-------------------------
Customer Session Tracking
-------------------------
With Customer Session Tracking enabled, the Live Expert Studio will be updated of each page that an Anywhere user navigates to via the “Customer Browser” tab.

.. important:: Support for this feature requires code to be added to all pages that will be tracked; this feature is not supported alongside cobrowsing.

Customer Session Tracking is enabled by default, to disable, set enableTracking to false in your configuration as follows:

::

  <body>
    ...
    <script src="//assets.liveexpert.net/widget/javascript/leaWidget.js"></script>
    <script>
      var config = {
        ...
        enableTracking: false
      };
      liveexpert.LEAWidget.init(config);
    </script>
  </body>
