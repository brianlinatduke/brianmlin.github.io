===============
Data Export API
===============

--------
Overview
--------
The data export API can be used to download dumps of operational data created and persisted in the Live Expert Enterprise. This feature must be enabled by a ClairVista representative and is disabled by default.

When this feature is enabled, a nightly dump will be taken of various records in the Live Expert database, including sessions, interactions, session events, and expert status changes. Each of these will be contained in a separate CSV file. These CSV files will then be bundled and compressed in a zip file. This job will be performed at 1:30 am CST each day, accumulating data from the previous 24 hour time period starting at midnight CST.

In cases in which there are no records found of a particular type during the previous 24 hour time period, the CSV file associated with this record type will be omitted from the ZIP file. If no records are found for any of the types to be extracted, no ZIP file will be created for that day. 

These ZIP files will be available on the server for at least 60 days. After that we reserve the right to delete them as the server’s disk space requires. 

The following sections describe the customer-facing interface for this service. This interface supports two types of request: (1) lookup requests, which return a list of the customer's saved zip files that are available for downloading, and (2) download requests, which retrieve the ZIP file for a given date.

------------------------
Lookup Interface Details
------------------------
The Enterprise exposes this service at https://liveexpert.net/dataexport/listFiles via an HTTP GET request.

Authentication
==============
Access to this API requires a valid OAuth authentication token. The scope associated with this interface is “dataExport”. For more information about how to authenticate via the Enterprise’s OAuth interface refer to the Live Expert Enterprise - OAuth Guide.

Request Information
===================
This service does not require any URL parameters to be specified.

Response Information
====================
Success Response
----------------
In the case of a successful request, this service will respond with a status code of 200 and the content will be a list of newline separated filenames. For example, the following would be valid response content:

::

  summary.2014-10-24.zip
  summary.2014-10-25.zip
  summary.2014-10-26.zip
  summary.2014-10-27.zip
  summary.2014-10-28.zip
  summary.2014-10-29.zip

Error Response
--------------
In the case of an error or otherwise unsuccessful authentication request, the following information will be provided as JSON formatted text:

success
  A boolean value. In cases in which the request was unable to be processed, a value of “false” will be returned on this key.
errorMessage
  A string description of the error that was encountered in trying to process the associated request.

--------------------------
Download Interface Details
--------------------------
The Enterprise exposes this service at https://liveexpert.net/liveexpert/enterprise/getFile via an HTTP GET or POST request.

Authentication
==============
Access to this API requires a valid OAuth authentication token. The scope associated with this interface is “dataExport”. For more information about how to authenticate via the Enterprise’s OAuth interface refer to the Live Expert Enterprise - OAuth Guide.

Request Information
===================
This service requires the following information to be provided by the client as URL parameters:

date
  The date for which the requested information should be retrieved.
Expected Format
  YYYY-MM-DD

Response Information
====================
Success Response
----------------
In the case of a successful authentication request, this service response will include the following:

  - A status code will be 200
  - A Content-Type header value will be “application/zip;charset=UTF-8” 
  - A Content-Disposition header value will be in the following format:

    - attachment; filename=“summary.2014-10-25.zip”
    - In this example “summary.2014-10-25.zip” is the appropriate name for the requested file

  - The response body will be the zip file contents.

If the request was validly formatted but the date specified does not have any content captured for it (e.g. it is a weekend or the data export feature was not enabled), a status code of 204 will be returned. 

Error Response
--------------
In the case of an error or otherwise unsuccessful authentication request, the server will respond with an appropriate status code and following information content as a JSON formatted string:

success
  A boolean value. In cases in which the request was unable to be processed, a value of “false” will be returned on this key. 
errorMessage
  A string description of the error that was encountered in trying to process the associated request.
